# Store Demo - User View

## Live Demo

[Store Demo](https://www.storedemo.gr)

## Description

This project is the user view for our store. This is used to view info about our page & news,
optionally create an account, login, place orders, edit personal info etc.

## Technologies Used

Frontend:

- React.js (TypeScript)
- CSS

Backend:

- Node.js (TypeScript)
- Express
- Multer (for uploading files)
- NodeMailer (for sending emails)

Database:

- MySQL for development, MariaDB for deployment

Authentication:

- Google ReCaptcha v3
- JSON Web Token (JWT)

## Preview

This is a quick preview of the user's view and available actions:

### Home Page

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/HomePage.gif)

### News (check the latest uploaded news, with pagination)

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/NewsPage.gif)

### Login/Register/Recover forgotten password (with OTP)

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/Authorization.gif)

After creating an account via `/register` page, user will receive an email with a link to verify his email address.
NOTE: Administrator verification is still required in order to activate all available functionality.

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/EmailVerification.PNG)

### View profile / Change basic info

After creating an account via `/register` page, user can now login at `/login` page. Following a successful login, user can do some basic actions until his account is verified, like changing his site's URL or his password, and uploading an image for his store.

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/UnverifiedUser.gif)

### Place orders

If his account is verified from the site's administrator (via the admin panel), the user can now have access to placing orders and viewing his order history & details on his profile page.

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/VerifiedUserOrder.gif)

Finally, after placing an order, the user will receive an email confirmation about his order with all details.

![](https://github.com/kdivriotis/store-demo/blob/master/user/README-images/OrderVerificationEmail.gif)

## Configuration

In order to run this project, the parameters specified in `.env.example` file need to be specified. After specifying the
parameters, rename the file to `.env` as the default configuration file to be used.
The required parameters are:

#### Frontend

- **REACT_APP_API_URL** : The URL of the API to make requests to (e.g. http://localhost:9000)
- **REACT_APP_RECAPTCHA_KEY** : The SITE KEY from Google's ReCaptcha. In order to generate a key, a Google account is required. Then, the key can be generated by following [Google's guide](https://www.google.com/recaptcha/about/).
- **REACT_APP_COMMUNICATION_EMAIL** : Will be displayed as your store's communication e-mail where users can reach out to
- **REACT_APP_COMMUNICATION_PHONE** : Will be displayed as your store's communication phone number where users can reach out to
- **REACT_APP_COMMUNICATION_ADDRESS** : Will be displayed as your store's address

#### Backend

- **PORT** : The port where the application should be running (e.g. 443 for HTTPS)
- **BASE_URL** : The backend application's URL (e.g. _localhost:PORT_)
- **FRONTEND_URL** : The backend application's URL (e.g. _localhost:PORT_)
- **RECAPTCHA_SECRET_KEY** : The SECRET KEY from Google's ReCaptcha. In order to generate a key, a Google account is required. Then, the key can be generated by following [Google's guide](https://www.google.com/recaptcha/about/).
- **JWT_SECRET** : The secret hash that will be used for generating users' JWTs (JSON Web Tokens)
- **ADMIN_JWT_SECRET** : The secret hash that will be used for generating administrators' JWTs (JSON Web Tokens)
- **DB_HOST** : The host where your database instance is running (e.g. localhost)
- **DB_PORT** : The port where the database instance is listening (e.g. 3306 for MySQL)
- **DB_USER** : Username to connect to database (e.g. root)
- **DB_PASSWORD** : Password to connect to database
- **DB_NAME** : The name of the database that was creating using the script (if not changed, it should be `store`)
- **SMTP_SERVER** : The SMTP server's address, which will be used for sending e-mails
- **SMTP_PORT** : The SMTP server's port (e.g. 465 for SSL)
- **SMTP_EMAIL** : E-mail address that can be used to connect to the specified SMTP server
- **SMTP_PASSWORD** : The password related to the account specified above
- **COMMUNICATION_EMAIL** : To be used as a prompt to users wanting to reach out to you via e-mail
- **COMMUNICATION_PHONE** : To be used as a prompt to users wanting to reach out to you via phone
- **ADMIN_EMAIL** : The administrator account's e-mail address. Will be used to automatically generate the required admin account
- **ADMIN_USERNAME** : The administrator account's username. Will be used to automatically generate the required admin account
- **ADMIN_PASSWORD** : The administrator account's password. Will be used to automatically generate the required admin account

## Deploy

The project was developed with Node.js (version 14.18.0) & NPM (version 6.14.15), so these are the minimum prerequisites.
Also, in order for the site to function, a database instance of MySQL or MariaDB needs to be configured and running. You can create the database's schema using the SQL scripts placed inside `/database` directory (_Schema.DDL.sql_ or _Schema.DDL.MariaDB.sql_, according to the database being used).
Finally, an SMTP server (e.g. Google's if you have GMail) needs to be used for sending verification e-mails etc.

### Run locally

#### Frontend

Navigate inside `frontend` directory, run `npm install` to install all required packages and then
run `npm start`. The application will be started on your local machine, at address **localhost:3000**
(or another port if set explicitly or if another application is already using port 3000)

#### Backend

Navigate inside `backend` directory, run `npm install` to install all required packages and then run `npm run dev`. The application will be started on your local machine in development mode, at address **localhost:PORT** (see configuration above).

### Run on hosting provider

#### Frontend

Navigate inside `frontend` directory and run `npm run build` to build the application.
The application is now built inside the `/build` directory.

#### Backend

Navigate inside `backend` directory and run `npm run build` to build the application.
The application is now built inside the `/dist` directory. Copy the `package.json` and `.env` files inside
`/dist` and also create a new directory inside, named `/views`.
Finally, copy the contents of `../frontend/build` inside `/views`.
The content inside `/dist` can now be deployed on a hosting provider that supports **Node.js**.
